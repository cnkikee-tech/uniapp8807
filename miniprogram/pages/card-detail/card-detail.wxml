<!--pages/card-detail/card-detail.wxml-->
<view class="container">
  <!-- åç‰‡å¤´éƒ¨ -->
  <view class="card-header">
    <view class="avatar-wrapper">
      <image 
        class="avatar" 
        src="{{card.avatar || '/images/default-avatar.png'}}" 
        mode="aspectFill"
      ></image>
    </view>
    <view class="basic-info">
      <text class="name">{{card.name}}</text>
      <text class="position">{{card.position || 'æš‚æ— èŒåŠ¡'}}</text>
      <text class="company">{{card.company || 'æš‚æ— å…¬å¸'}}</text>
    </view>
  </view>

  <!-- åç‰‡è¯¦æƒ… -->
  <view class="card-details">
    <view class="detail-section">
      <view class="section-title">åŸºæœ¬ä¿¡æ¯</view>
      <view class="detail-item">
        <text class="detail-label">ğŸ“ ç”µè¯</text>
        <text class="detail-value phone" bindtap="onPhoneTap" data-phone="{{card.phone}}">{{card.phone}}</text>
      </view>
      <view class="detail-item" wx:if="{{card.email}}">
        <text class="detail-label">ğŸ“§ é‚®ç®±</text>
        <text class="detail-value email" bindtap="onEmailTap" data-email="{{card.email}}">{{card.email}}</text>
      </view>
      <view class="detail-item" wx:if="{{card.wechat}}">
        <text class="detail-label">ğŸ’¬ å¾®ä¿¡</text>
        <text class="detail-value">{{card.wechat}}</text>
      </view>
      <view class="detail-item" wx:if="{{card.website}}">
        <text class="detail-label">ğŸŒ ç½‘ç«™</text>
        <text class="detail-value website" bindtap="onWebsiteTap" data-url="{{card.website}}">{{card.website}}</text>
      </view>
    </view>

    <view class="detail-section" wx:if="{{card.company_address}}">
      <view class="section-title">å…¬å¸åœ°å€</view>
      <view class="detail-item address">
        <text class="detail-label">ğŸ“ åœ°å€</text>
        <text class="detail-value address-value" bindtap="onAddressTap" data-address="{{card.company_address}}">{{card.company_address}}</text>
      </view>
    </view>

    <view class="detail-section" wx:if="{{card.description}}">
      <view class="section-title">ä¸ªäººç®€ä»‹</view>
      <view class="detail-item">
        <text class="detail-value description">{{card.description}}</text>
      </view>
    </view>
  </view>

  <!-- æ“ä½œæŒ‰é’® -->
  <view class="action-buttons">
    <button class="action-btn primary" bindtap="onPhoneTap" data-phone="{{card.phone}}">
      <text class="btn-icon">ğŸ“</text>
      <text class="btn-text">æ‹¨æ‰“ç”µè¯</text>
    </button>
    <button class="action-btn secondary" bindtap="onSaveContact">
      <text class="btn-icon">ğŸ‘¤</text>
      <text class="btn-text">ä¿å­˜è”ç³»äºº</text>
    </button>
    <button class="action-btn tertiary" bindtap="onShareCard">
      <text class="btn-icon">ğŸ“¤</text>
      <text class="btn-text">åˆ†äº«åç‰‡</text>
    </button>
  </view>

  <!-- ç»Ÿè®¡ä¿¡æ¯ -->
  <view class="stats-info">
    <view class="stat-item">
      <text class="stat-label">æµè§ˆæ¬¡æ•°</text>
      <text class="stat-value">{{card.view_count}}</text>
    </view>
    <view class="stat-item">
      <text class="stat-label">åˆ›å»ºæ—¶é—´</text>
      <text class="stat-value">{{card.created_at}}</text>
    </view>
  </view>
</view>

<!-- åŠ è½½çŠ¶æ€ -->
<view wx:if="{{isLoading}}" class="loading-overlay">
  <view class="loading-content">
    <text>åŠ è½½ä¸­...</text>
  </view>
</view>